(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{133:function(e,t,n){},174:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(14),i=n.n(r),o=(n(133),n(85)),s=n(12),u=n(15),l=n(65);n(134);l.a.initializeApp({apiKey:"AIzaSyBlc-9cBQVLLXdLxYfVpgh8I3iFALoQ7E0",authDomain:"todo-2ac34.firebaseapp.com",databaseURL:"https://todo-2ac34.firebaseio.com",projectId:"todo-2ac34",storageBucket:"todo-2ac34.appspot.com",messagingSenderId:"144767486267",appId:"1:144767486267:web:53c6a77d36c83e42db4f1e"});var d=new l.a.auth.GoogleAuthProvider,j=l.a,b=n(4),f=a.a.createContext(),h=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(u.a)(n,2),r=a[0],i=a[1],o=Object(c.useState)(!0),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(c.useEffect)((function(){j.auth().onAuthStateChanged((function(e){i(e),d(!1)}))}),[]),l?Object(b.jsx)(b.Fragment,{children:"Loading..."}):Object(b.jsx)(f.Provider,{value:{currentUser:r},children:t})},p=n(214),O=n(38),x=n.n(O),m=n(213),g=n(212),v=x()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),k=Object(s.g)((function(){var e=v();return Object(c.useContext)(f).currentUser?Object(b.jsx)(s.a,{to:"/"}):Object(b.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(m.a,{}),Object(b.jsx)("div",{className:e.paper,children:Object(b.jsx)(p.a,{onClick:function(){l.a.auth().signInWithPopup(d)},fullWidth:!0,variant:"contained",className:e.submit,color:"primary",children:"Sign In with Google"})})]})})),y=n(79),w=n(3),C=["component"],S=function(e){var t=e.component,n=Object(w.a)(e,C),a=Object(c.useContext)(f).currentUser;return Object(b.jsx)(s.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){return a?"perbjester@gmail.com"===a.email||"flettemia@google.com"===a.email?Object(b.jsx)(t,Object(y.a)({},e)):Object(b.jsx)(s.a,{to:"/unauthorised"}):Object(b.jsx)(s.a,{to:"/login"})}}))},I=n(22),D=n(34),T=n.n(D),N=n(57),L=(n(176),function(){var e=Object(N.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return n=[],e.next=5,j.firestore().collection(t).get().then((function(e){e.forEach((function(e){n.push(e.id)}))})).catch((function(e){console.error("Failed to load todo-list",e)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=function(){var e=Object(N.a)(T.a.mark((function e(t,n){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.abrupt("return",j.firestore().collection(t).doc(n).get().then((function(e){return e.data()})));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=n(224),F=n(181),W=n(221),B=n(88),P=n(108),R=n.n(P),U=n(223),V=n(111),G=n.n(V),K=n(222),J=n(215),q=n(227),z=n(228),H=function(e){var t=e.value,n=e.id,a=e.updateItemTitle,r=Object(c.useState)(t),i=Object(u.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),j=d[0],f=d[1],h=Object(c.useState)(!1),p=Object(u.a)(h,2),O=p[0],m=p[1],g=Object(c.useState)(""),v=Object(u.a)(g,2),k=v[0],y=v[1],w=x()({textView:{width:"50%",textOverflow:"ellipsis",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",display:j?"none":""},inputView:{width:"50%",display:j?"":"none"}})(),C=Object(c.useRef)(null),S=function(){o.length>0?(f(!1),a(o,n),m(!1),y("")):(m(!0),y("Denne kan ikke v\xe6re tom"))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(J.a,{variant:"body1",className:w.textView,onClick:function(){setTimeout((function(){C.current.focus()}),100),f(!0)},children:o}),Object(b.jsx)(z.a,{className:w.inputView,variant:"standard",defaultValue:o,inputRef:C,required:!0,error:O,helperText:k,onKeyDown:function(e){"Enter"===e.key&&S()},onBlur:S,onChange:function(e){s(e.target.value)}})]})},Q=n(229),M=n(225),X=n(226),Y=n(218),Z=n(219),$=n(109),_=n.n($),ee=n(220),te=n(115),ne=n(230),ce=x()((function(e){return{root:{backgroundColor:e.palette.primary},title:{cursor:"pointer"},toolbar:{justifyContent:"space-between"},profileImage:{borderRadius:"50%",verticalAlign:"middle",maxWidth:"3rem",maxHeight:"3rem",marginRight:"1rem"}}})),ae=function(e){var t=e.todoLists,n=e.onchange,a=e.currentTodoList,r=Object(s.f)(),i=ce(),o=Object(c.useContext)(f).currentUser,l=Object(c.useState)(null),d=Object(u.a)(l,2),h=d[0],p=d[1];return Object(b.jsx)(Y.a,{position:"static",className:i.root,children:Object(b.jsxs)(Z.a,{className:i.toolbar,children:[Object(b.jsx)(J.a,{variant:"h6",className:i.title,onClick:function(){r.push("/")},children:"TODOAPP"}),o&&Object(b.jsxs)(b.Fragment,{children:[t.length>0&&a&&Object(b.jsx)(ne.a,{fullWidth:!0,style:{width:"10rem",height:"2rem",backgroundColor:"#ffffff"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,variant:"outlined",onChange:n,children:t.map((function(e){return Object(b.jsx)(ee.a,{value:e,children:e},e)}))}),Object(b.jsx)(W.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object(b.jsx)(_.a,{})}),Object(b.jsxs)(te.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:!!h,onClose:function(){p(null)},children:[Object(b.jsx)("div",{style:{padding:"8px"},children:o.displayName?Object(b.jsxs)(J.a,{variant:"h6",children:[Object(b.jsx)("img",{src:o.photoURL,alt:"Avatar",className:i.profileImage}),o.displayName," "]}):Object(b.jsxs)(J.a,{variant:"h6",children:["Signed in as: ",o.email," "]})}),Object(b.jsx)(K.a,{}),Object(b.jsx)(ee.a,{onClick:function(){j.auth().signOut().then((function(){r.push("/")}))},children:"Log out"})]})]})]})})},re=n(110),ie=n.n(re),oe=n(112),se=n.n(oe),ue=n(113),le=n.n(ue),de=x()((function(e){return{root:{margin:e.spacing(1),listStyleType:"none",display:"flex",justifyContent:"center"},card:{width:"800px",minWidth:"300px",overflow:"hidden"},actionLine:{padding:"5px",display:"flex",justifyContent:"center"},input:{marginLeft:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1),flex:1,width:"80%"},inputfield:{}}})),je=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(u.a)(r,2),o=i[0],s=i[1],l=Object(c.useState)([]),d=Object(u.a)(l,2),h=d[0],O=d[1],x=Object(c.useState)([]),m=Object(u.a)(x,2),g=m[0],v=m[1],k=Object(c.useState)(!1),y=Object(u.a)(k,2),w=y[0],C=y[1],S=Object(c.useContext)(f).currentUser,D=Object(c.useState)(!0),P=Object(u.a)(D,2),V=P[0],Y=P[1],Z=de();Object(c.useEffect)((function(){(function(){var e=Object(N.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,L(S.email);case 4:(t=e.sent)&&t.length>0&&(v(t),a(t[0])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,C(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()().then()}),[S.email]),Object(c.useEffect)((function(){(function(){var e=Object(N.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return e.prev=1,C(!0),e.next=5,A(S.email,n);case 5:(t=e.sent).tasks&&O(t.tasks),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to load todo-list",e.t0);case 12:return e.prev=12,C(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}})()().then()}),[S.email,n]),Object(c.useEffect)((function(){var e,t,c;V||(e=S.email,t=n,c=h,j.firestore().collection(e).doc(t).set({tasks:c}).then((function(){})).catch((function(e){console.error("Error updating/creating document: ",e)}))).then((function(){Y(!0)}))}),[h,V,S.email,n]);var $=function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isDone=!n.isDone,O(Object(I.a)(h)),Y(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ae,{todoLists:g,onchange:function(e){a(e.target.value)},currentTodoList:n}),Object(b.jsx)("div",{className:Z.root,children:n&&Object(b.jsxs)("div",{className:Z.card,children:[Object(b.jsx)("form",{style:{textAlign:"center"},onSubmit:function(e){e.preventDefault();var t={itemTitle:o,id:Object(q.a)(),isFavorite:!1,isDone:!1};O([t].concat(Object(I.a)(h))),s(""),Y(!1)},children:Object(b.jsx)(z.a,{className:Z.input,variant:"outlined",fullWidth:!0,required:!0,placeholder:"Legg til en oppgave",value:o,onChange:function(e){return s(e.currentTarget.value)}})}),Object(b.jsxs)(B.Container,{onDrop:function(e){var t=e.removedIndex,n=e.addedIndex,c=h.filter((function(e){return!e.isDone})),a=h.findIndex((function(e){return e.id===c[t].id})),r=h.findIndex((function(e){return e.id===c[n].id}));O((function(e){return R()(e,a,r)})),Y(!1)},getChildPayload:function(e){return h[e]},dragHandleSelector:".drag-handle",lockAxis:"y",dropPlaceholder:{animationDuration:150,showOnTop:!0,className:"cards-drop-preview"},children:[h&&h.filter((function(e){return!e.isDone})).map((function(e){var t=e.id,n=e.isFavorite,c=e.itemTitle;return Object(b.jsxs)(B.Draggable,{children:[Object(b.jsxs)(F.a,{style:{height:"3rem",padding:"1rem"},children:[Object(b.jsx)(U.a,{children:Object(b.jsx)(W.a,{onClick:function(e){return $(t,e)},children:Object(b.jsx)(ie.a,{})})}),Object(b.jsx)(H,{value:c,id:t,updateItemTitle:function(e,t){return function(e,t){h.find((function(e){return e.id===t})).itemTitle=e,O(Object(I.a)(h)),Y(!1)}(e,t)}}),Object(b.jsxs)(E.a,{children:[Object(b.jsx)(U.a,{style:{minWidth:"0"},children:Object(b.jsx)(Q.a,{checked:n,icon:Object(b.jsx)(M.a,{}),checkedIcon:Object(b.jsx)(X.a,{}),onClick:function(e){return function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isFavorite=!n.isFavorite,O(Object(I.a)(h)),Y(!1)}(t,e)},name:"checked"})}),Object(b.jsx)(U.a,{className:"drag-handle",style:{minWidth:"0",padding:"1rem"},children:Object(b.jsx)(G.a,{})})]})]}),Object(b.jsx)(K.a,{})]},t)})),Object(b.jsx)(K.a,{}),Object(b.jsx)("div",{className:Z.actionLine,children:Object(b.jsx)(p.a,{onClick:function(e){for(var t=h.reduce((function(e,t,n){return t.isDone&&e.push(n),e}),[]);t.length;)h.splice(t.pop(),1);O(Object(I.a)(h)),Y(!1)},className:Z.deleteAllButton,children:"Remove finished"})}),h&&h.filter((function(e){return e.isDone})).map((function(e){var t=e.id,n=e.itemTitle;return Object(b.jsxs)(F.a,{style:{height:"3rem"},children:[Object(b.jsx)(U.a,{children:Object(b.jsx)(W.a,{onClick:function(e){return $(t,e)},children:Object(b.jsx)(se.a,{})})}),Object(b.jsx)(J.a,{variant:"body1",style:{textDecoration:"line-through"},children:n}),Object(b.jsx)(E.a,{children:Object(b.jsx)(U.a,{children:Object(b.jsx)(W.a,{onClick:function(e){return function(e,t){h.splice(h.findIndex((function(t){return t.id===e})),1),O(Object(I.a)(h)),Y(!1)}(t)},children:Object(b.jsx)(le.a,{})})})})]},t)}))]}),w&&Object(b.jsx)("pre",{children:"fetching data ..."})]})})]})},be=n(114),fe=n(211),he=Object(s.g)((function(){return Object(c.useEffect)((function(){j.auth().signOut().then(console.log("signed out"))}),[]),Object(b.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)("h1",{children:"IKKE TILGANG, SJ\xd8!"}),Object(b.jsx)("p",{children:"Du er logget ut igjen"}),Object(b.jsx)("a",{href:"/",children:"Tilbake til innlogging"})]})})),pe=Object(be.a)({palette:{primary:{main:"#494D5F"},secondary:{main:"#8458B3"}}}),Oe=function(){return Object(b.jsx)(fe.a,{theme:pe,children:Object(b.jsx)(h,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(S,{exact:!0,path:"/",component:je}),Object(b.jsx)(s.b,{exact:!0,path:"/login",component:k}),Object(b.jsx)(s.b,{exact:!0,path:"/unauthorised",component:he})]})})})};i.a.render(Object(b.jsx)(Oe,{}),document.getElementById("root"))}},[[174,1,2]]]);
//# sourceMappingURL=main.4c7d0ba2.chunk.js.map