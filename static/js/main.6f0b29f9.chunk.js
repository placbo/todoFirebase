(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{131:function(e,t,n){e.exports=n(176)},136:function(e,t,n){},176:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),i=n.n(c),o=(n(136),n(84)),l=n(11),u=n(20),s=n(65);n(137);s.a.initializeApp({apiKey:"AIzaSyBlc-9cBQVLLXdLxYfVpgh8I3iFALoQ7E0",authDomain:"todo-2ac34.firebaseapp.com",databaseURL:"https://todo-2ac34.firebaseio.com",projectId:"todo-2ac34",storageBucket:"todo-2ac34.appspot.com",messagingSenderId:"144767486267",appId:"1:144767486267:web:53c6a77d36c83e42db4f1e"});var m=new s.a.auth.GoogleAuthProvider,d=s.a,f=r.a.createContext(),p=function(e){var t=e.children,n=Object(a.useState)(null),c=Object(u.a)(n,2),i=c[0],o=c[1],l=Object(a.useState)(!0),s=Object(u.a)(l,2),m=s[0],p=s[1];return Object(a.useEffect)((function(){d.auth().onAuthStateChanged((function(e){o(e),p(!1)}))}),[]),m?r.a.createElement(r.a.Fragment,null,"Loading..."):r.a.createElement(f.Provider,{value:{currentUser:i}},t)},g=n(219),h=n(36),E=n.n(h),b=n(218),v=n(217),O=E()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),j=Object(l.g)((function(){var e=O();return Object(a.useContext)(f).currentUser?r.a.createElement(l.a,{to:"/"}):r.a.createElement(v.a,{component:"main",maxWidth:"xs"},r.a.createElement(b.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(g.a,{onClick:function(){s.a.auth().signInWithPopup(m)},fullWidth:!0,variant:"contained",className:e.submit,color:"primary"},"Sign In with Google")))})),y=n(119),x=function(e){var t=e.component,n=Object(y.a)(e,["component"]),c=Object(a.useContext)(f).currentUser;return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return c?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/login"})}}))},k=n(48),w=n(87),C=n.n(w),S=n(110),D=(n(178),function(){var e=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return n=[],e.next=5,d.firestore().collection(t).get().then((function(e){e.forEach((function(e){console.log(e.data()),n.push(e.id)}))})).catch((function(e){console.log("Failed to load todo-list",e)})).finally((function(){console.log("list!",n)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),I=n(229),L=n(183),N=n(226),T=n(88),F=n(111),A=n.n(F),W=n(228),B=n(114),P=n.n(B),R=n(227),U=n(220),V=n(233),q=n(232),z=function(e){var t=e.value,n=e.id,c=e.updateItemTitle,i=Object(a.useState)(t),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Object(a.useState)(!1),d=Object(u.a)(m,2),f=d[0],p=d[1],g=Object(a.useState)(!1),h=Object(u.a)(g,2),b=h[0],v=h[1],O=Object(a.useState)(""),j=Object(u.a)(O,2),y=j[0],x=j[1],k=E()({textView:{width:"50%",textOverflow:"ellipsis",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",display:f?"none":""},inputView:{width:"50%",display:f?"":"none"}})(),w=Object(a.useRef)(null),C=function(){l.length>0?(p(!1),c(l,n),v(!1),x("")):(v(!0),x("Denne kan ikke v\xe6re tom"))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{variant:"body1",className:k.textView,onClick:function(){setTimeout((function(){w.current.focus()}),100),p(!0)}},l),r.a.createElement(q.a,{className:k.inputView,variant:"standard",defaultValue:l,inputRef:w,required:!0,error:b,helperText:y,onKeyDown:function(e){"Enter"===e.key&&C()},onBlur:C,onChange:function(e){s(e.target.value)}}))},G=n(234),H=n(230),J=n(231),K=n(223),Q=n(224),M=n(112),X=n.n(M),Y=n(225),Z=n(118),$=n(235),_=E()((function(e){return{root:{backgroundColor:e.palette.primary},title:{cursor:"pointer"},toolbar:{justifyContent:"space-between"},profileImage:{borderRadius:"50%",verticalAlign:"middle",maxWidth:"3rem",maxHeight:"3rem",marginRight:"1rem"}}})),ee=function(e){var t=e.todoLists,n=e.onchange,c=e.currentTodoList,i=Object(l.f)(),o=_(),s=Object(a.useContext)(f).currentUser,m=Object(a.useState)(null),p=Object(u.a)(m,2),h=p[0],E=p[1];return r.a.createElement(K.a,{position:"static",className:o.root},r.a.createElement(Q.a,{className:o.toolbar},r.a.createElement(U.a,{variant:"h6",className:o.title,onClick:function(){i.push("/")}},"TODOAPP"),!s&&r.a.createElement(g.a,{color:"inherit"},"Login"),!!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t.length>0&&r.a.createElement($.a,{fullWidth:!0,style:{width:"10rem",backgroundColor:"#ffffff"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:c,variant:"outlined",onChange:n},t.map((function(e){return r.a.createElement(Y.a,{key:e,value:e},e)})))),r.a.createElement(N.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){E(e.currentTarget)}},r.a.createElement(X.a,null)),r.a.createElement(Z.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:!!h,onClose:function(){E(null)}},r.a.createElement("div",{style:{padding:"8px"}},s.displayName?r.a.createElement(U.a,{variant:"h6"},r.a.createElement("img",{src:s.photoURL,alt:"Avatar",className:o.profileImage}),s.displayName," "):r.a.createElement(U.a,{variant:"h6"},"Signed in as: ",s.email," ")),r.a.createElement(R.a,null),r.a.createElement(Y.a,{onClick:function(){d.auth().signOut().then((function(){i.push("/")}))}},"Log out")))))},te=n(113),ne=n.n(te),ae=n(115),re=n.n(ae),ce=n(116),ie=n.n(ce),oe=E()((function(e){return{root:{margin:e.spacing(1),listStyleType:"none",display:"flex",justifyContent:"center"},card:{width:"800px",minWidth:"300px",overflow:"hidden"},actionLine:{padding:"5px",display:"flex",justifyContent:"space-between"},input:{marginLeft:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1),flex:1,width:"80%"},inputfield:{}}})),le=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)(""),o=Object(u.a)(i,2),l=o[0],s=o[1],m=Object(a.useState)([]),p=Object(u.a)(m,2),h=p[0],E=p[1],b=Object(a.useState)([]),v=Object(u.a)(b,2),O=v[0],j=v[1],y=Object(a.useState)(!1),x=Object(u.a)(y,2),w=x[0],C=x[1],S=Object(a.useContext)(f).currentUser,F=Object(a.useState)(!0),B=Object(u.a)(F,2),K=B[0],Q=B[1],M=oe();Object(a.useEffect)((function(){C(!0),D(S.email).then((function(e){e&&e.length>0&&(j(e),c(e[0])),C(!1)}))}),[S.email]),Object(a.useEffect)((function(){var e,t;C(!0),n.length>0&&(e=S.email,t=n,console.log(e),console.log(t),d.firestore().collection(e).doc(t).get().then((function(e){return e.data()}))).then((function(e){console.log("Fetched: ",e),e.tasks&&E(e.tasks)})).catch((function(e){console.log("Failed to load todo-list",e)})).finally((function(){C(!1)}))}),[S.email,n]),Object(a.useEffect)((function(){var e,t,a;K||(console.log(h),(e=S.email,t=n,a=h,d.firestore().collection(e).doc(t).set({tasks:a}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error updating/creating document: ",e)}))).then((function(){Q(!0)})))}),[h,K,S.email,n]);var X=function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isDone=!n.isDone,E(Object(k.a)(h)),Q(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{todoLists:O,onchange:function(e){c(e.target.value)},currentTodoList:n}),r.a.createElement("div",{className:M.root},r.a.createElement("div",{className:M.card},r.a.createElement("form",{style:{textAlign:"center"},onSubmit:function(e){e.preventDefault(),console.log(h);var t={itemTitle:l,id:Object(V.a)(),isFavorite:!1,isDone:!1};E([].concat(Object(k.a)(h),[t])),s(""),console.log(h),Q(!1)}},r.a.createElement(q.a,{className:M.input,variant:"outlined",fullWidth:!0,required:!0,placeholder:"Legg til en oppgave",value:l,onChange:function(e){return s(e.currentTarget.value)}})),r.a.createElement(T.Container,{onDrop:function(e){var t=e.removedIndex,n=e.addedIndex,a=h.filter((function(e){return!e.isDone})),r=h.findIndex((function(e){return e.id===a[t].id})),c=h.findIndex((function(e){return e.id===a[n].id}));E((function(e){return A()(e,r,c)})),Q(!1)},getChildPayload:function(e){return h[e]},dragHandleSelector:".drag-handle",lockAxis:"y",dropPlaceholder:{animationDuration:150,showOnTop:!0,className:"cards-drop-preview"}},h&&h.filter((function(e){return!e.isDone})).map((function(e){var t=e.id,n=e.isFavorite,a=e.itemTitle;return r.a.createElement(T.Draggable,{key:t},r.a.createElement(L.a,{style:{height:"3rem",padding:"1rem"}},r.a.createElement(W.a,null,r.a.createElement(N.a,{onClick:function(e){return X(t,e)}},r.a.createElement(ne.a,null))),r.a.createElement(z,{value:a,id:t,updateItemTitle:function(e,t){return function(e,t){h.find((function(e){return e.id===t})).itemTitle=e,E(Object(k.a)(h)),Q(!1)}(e,t)}}),r.a.createElement(I.a,null,r.a.createElement(W.a,{style:{minWidth:"0"}},r.a.createElement(G.a,{checked:n,icon:r.a.createElement(H.a,null),checkedIcon:r.a.createElement(J.a,null),onClick:function(e){return function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isFavorite=!n.isFavorite,E(Object(k.a)(h)),Q(!1)}(t,e)},name:"checked"})),r.a.createElement(W.a,{className:"drag-handle",style:{minWidth:"0",padding:"1rem"}},r.a.createElement(P.a,null)))),r.a.createElement(R.a,null))})),r.a.createElement(R.a,null),h&&h.filter((function(e){return e.isDone})).map((function(e){var t=e.id,n=e.itemTitle;return r.a.createElement(L.a,{key:t,style:{height:"3rem"}},r.a.createElement(W.a,null,r.a.createElement(N.a,{onClick:function(e){return X(t,e)}},r.a.createElement(re.a,null))),r.a.createElement(U.a,{variant:"body1",style:{textDecoration:"line-through"}},n),r.a.createElement(I.a,null,r.a.createElement(W.a,null,r.a.createElement(N.a,{onClick:function(e){return function(e,t){h.splice(h.findIndex((function(t){return t.id===e})),1),E(Object(k.a)(h)),Q(!1)}(t)}},r.a.createElement(ie.a,null)))))})),r.a.createElement("div",{className:M.actionLine},r.a.createElement(g.a,{onClick:function(e){for(var t=h.reduce((function(e,t,n){return t.isDone&&e.push(n),e}),[]);t.length;)h.splice(t.pop(),1);E(Object(k.a)(h)),Q(!1)},className:M.deleteAllButton},"Remove finished"))),w&&r.a.createElement("pre",null,"fetching data ..."))))},ue=n(117),se=n(216),me=Object(ue.a)({palette:{primary:{main:"#494D5F"},secondary:{main:"#8458B3"}}}),de=function(){return r.a.createElement(se.a,{theme:me},r.a.createElement(p,null,r.a.createElement(o.a,null,r.a.createElement(x,{exact:!0,path:"/",component:le}),r.a.createElement(l.b,{exact:!0,path:"/login",component:j}))))};i.a.render(r.a.createElement(de,null),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.6f0b29f9.chunk.js.map