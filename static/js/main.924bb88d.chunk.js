(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{134:function(e,t,n){},175:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(14),i=n.n(a),o=(n(134),n(86)),s=n(12),u=n(15),l=n(66);n(135);l.a.initializeApp({apiKey:"AIzaSyBlc-9cBQVLLXdLxYfVpgh8I3iFALoQ7E0",authDomain:"todo-2ac34.firebaseapp.com",databaseURL:"https://todo-2ac34.firebaseio.com",projectId:"todo-2ac34",storageBucket:"todo-2ac34.appspot.com",messagingSenderId:"144767486267",appId:"1:144767486267:web:53c6a77d36c83e42db4f1e"});var d=new l.a.auth.GoogleAuthProvider,j=l.a,b=n(4),h=r.a.createContext(),f=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(u.a)(n,2),a=r[0],i=r[1],o=Object(c.useState)(!0),s=Object(u.a)(o,2),l=s[0],d=s[1];return Object(c.useEffect)((function(){j.auth().onAuthStateChanged((function(e){i(e),d(!1)}))}),[]),l?Object(b.jsx)(b.Fragment,{children:"Loading..."}):Object(b.jsx)(h.Provider,{value:{currentUser:a},children:t})},p=n(215),O=n(39),m=n.n(O),x=n(214),g=n(213),v=m()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),k=Object(s.g)((function(){var e=v();return Object(c.useContext)(h).currentUser?Object(b.jsx)(s.a,{to:"/"}):Object(b.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(x.a,{}),Object(b.jsx)("div",{className:e.paper,children:Object(b.jsx)(p.a,{onClick:function(){l.a.auth().signInWithPopup(d)},fullWidth:!0,variant:"contained",className:e.submit,color:"primary",children:"Sign In with Google"})})]})})),y=n(80),w=n(3),C=["component"],S="perbjester@gmail.com",I=function(e){var t=e.component,n=Object(w.a)(e,C),r=Object(c.useContext)(h).currentUser;return Object(b.jsx)(s.b,Object(y.a)(Object(y.a)({},n),{},{render:function(e){return r?r.email===S||"msindre@yahoo.co.uk"===r.email?Object(b.jsx)(t,Object(y.a)({},e)):Object(b.jsx)(s.a,{to:"/unauthorised"}):Object(b.jsx)(s.a,{to:"/login"})}}))},D=n(21),T=n(33),N=n.n(T),L=n(58),A=(n(177),function(){var e=Object(L.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return S,n=[],e.next=6,j.firestore().collection("perbjester@gmail.com").get().then((function(e){e.forEach((function(e){n.push(e.id)}))})).catch((function(e){console.error("Failed to load todo-list",e)}));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=function(){var e=Object(L.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return S,e.abrupt("return",j.firestore().collection("perbjester@gmail.com").doc(n).get().then((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=n(225),W=n(182),B=n(222),P=n(88),R=n(109),U=n.n(R),V=n(224),G=n(112),K=n.n(G),J=n(223),q=n(216),z=n(230),H=n(231),Q=function(e){var t=e.value,n=e.id,r=e.updateItemTitle,a=Object(c.useState)(t),i=Object(u.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),j=d[0],h=d[1],f=Object(c.useState)(!1),p=Object(u.a)(f,2),O=p[0],x=p[1],g=Object(c.useState)(""),v=Object(u.a)(g,2),k=v[0],y=v[1],w=m()({textView:{width:"50%",textOverflow:"ellipsis",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",display:j?"none":""},inputView:{width:"50%",display:j?"":"none"}})(),C=Object(c.useRef)(null),S=function(){o.length>0?(h(!1),r(o,n),x(!1),y("")):(x(!0),y("Denne kan ikke v\xe6re tom"))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q.a,{variant:"body1",className:w.textView,onClick:function(){setTimeout((function(){C.current.focus()}),100),h(!0)},children:o}),Object(b.jsx)(H.a,{className:w.inputView,variant:"standard",defaultValue:o,inputRef:C,required:!0,error:O,helperText:k,onKeyDown:function(e){"Enter"===e.key&&S()},onBlur:S,onChange:function(e){s(e.target.value)}})]})},M=n(229),X=n(226),Y=n(227),Z=n(219),$=n(220),_=n(110),ee=n.n(_),te=n(221),ne=n(116),ce=n(228),re=m()((function(e){return{root:{backgroundColor:e.palette.primary},title:{cursor:"pointer"},toolbar:{justifyContent:"space-between"},profileImage:{borderRadius:"50%",verticalAlign:"middle",maxWidth:"3rem",maxHeight:"3rem",marginRight:"1rem"}}})),ae=function(e){var t=e.todoLists,n=e.onchange,r=e.currentTodoList,a=Object(s.f)(),i=re(),o=Object(c.useContext)(h).currentUser,l=Object(c.useState)(null),d=Object(u.a)(l,2),f=d[0],p=d[1];return Object(b.jsx)(Z.a,{position:"static",className:i.root,children:Object(b.jsxs)($.a,{className:i.toolbar,children:[Object(b.jsx)(q.a,{variant:"h6",className:i.title,onClick:function(){a.push("/")},children:"TODOAPP"}),o&&Object(b.jsxs)(b.Fragment,{children:[t.length>0&&r&&Object(b.jsx)(ce.a,{fullWidth:!0,style:{width:"10rem",height:"2rem",backgroundColor:"#ffffff"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:r,variant:"outlined",onChange:n,children:t.map((function(e){return Object(b.jsx)(te.a,{value:e,children:e},e)}))}),Object(b.jsx)(B.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object(b.jsx)(ee.a,{})}),Object(b.jsxs)(ne.a,{id:"simple-menu",anchorEl:f,keepMounted:!0,open:!!f,onClose:function(){p(null)},children:[Object(b.jsx)("div",{style:{padding:"8px"},children:o.displayName?Object(b.jsxs)(q.a,{variant:"h6",children:[Object(b.jsx)("img",{src:o.photoURL,alt:"Avatar",className:i.profileImage}),o.displayName," "]}):Object(b.jsxs)(q.a,{variant:"h6",children:["Signed in as: ",o.email," "]})}),Object(b.jsx)(J.a,{}),Object(b.jsx)(te.a,{onClick:function(){j.auth().signOut().then((function(){a.push("/")}))},children:"Log out"})]})]})]})})},ie=n(111),oe=n.n(ie),se=n(113),ue=n.n(se),le=n(114),de=n.n(le),je=m()((function(e){return{root:{margin:e.spacing(1),listStyleType:"none",display:"flex",justifyContent:"center"},card:{width:"800px",minWidth:"300px",overflow:"hidden"},actionLine:{padding:"5px",display:"flex",justifyContent:"center"},input:{marginLeft:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1),flex:1,width:"80%"},inputfield:{}}})),be=function(){var e=Object(c.useState)(),t=Object(u.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),i=Object(u.a)(a,2),o=i[0],s=i[1],l=Object(c.useState)([]),d=Object(u.a)(l,2),f=d[0],O=d[1],m=Object(c.useState)([]),x=Object(u.a)(m,2),g=x[0],v=x[1],k=Object(c.useState)(!1),y=Object(u.a)(k,2),w=y[0],C=y[1],S=Object(c.useContext)(h).currentUser,I=Object(c.useState)(!0),T=Object(u.a)(I,2),R=T[0],G=T[1],Z=je();Object(c.useEffect)((function(){(function(){var e=Object(L.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,A(S.email);case 4:(t=e.sent)&&t.length>0&&(v(t),r(t[0])),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.prev=11,C(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})));return function(){return e.apply(this,arguments)}})()().then()}),[S.email]),Object(c.useEffect)((function(){(function(){var e=Object(L.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}return e.prev=1,C(!0),e.next=5,E(S.email,n);case 5:(t=e.sent).tasks&&O(t.tasks),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Failed to load todo-list",e.t0);case 12:return e.prev=12,C(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(){return e.apply(this,arguments)}})()().then()}),[S.email,n]),Object(c.useEffect)((function(){var e,t;R||(S.email,e=n,t=f,j.firestore().collection("perbjester@gmail.com").doc(e).set({tasks:t}).then((function(){})).catch((function(e){console.error("Error updating/creating document: ",e)}))).then((function(){G(!0)}))}),[f,R,S.email,n]);var $=function(e,t){t.preventDefault();var n=f.find((function(t){return t.id===e}));n.isDone=!n.isDone,O(Object(D.a)(f)),G(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ae,{todoLists:g,onchange:function(e){r(e.target.value)},currentTodoList:n}),Object(b.jsx)("div",{className:Z.root,children:n&&Object(b.jsxs)("div",{className:Z.card,children:[Object(b.jsx)("form",{style:{textAlign:"center"},onSubmit:function(e){e.preventDefault();var t={itemTitle:o,id:Object(z.a)(),isFavorite:!1,isDone:!1};O([t].concat(Object(D.a)(f))),s(""),G(!1)},children:Object(b.jsx)(H.a,{className:Z.input,variant:"outlined",fullWidth:!0,required:!0,placeholder:"Legg til en oppgave",value:o,onChange:function(e){return s(e.currentTarget.value)}})}),Object(b.jsxs)(P.Container,{onDrop:function(e){var t=e.removedIndex,n=e.addedIndex,c=f.filter((function(e){return!e.isDone})),r=f.findIndex((function(e){return e.id===c[t].id})),a=f.findIndex((function(e){return e.id===c[n].id}));O((function(e){return U()(e,r,a)})),G(!1)},getChildPayload:function(e){return f[e]},dragHandleSelector:".drag-handle",lockAxis:"y",dropPlaceholder:{animationDuration:150,showOnTop:!0,className:"cards-drop-preview"},children:[f&&f.filter((function(e){return!e.isDone})).map((function(e){var t=e.id,n=e.isFavorite,c=e.itemTitle;return Object(b.jsxs)(P.Draggable,{children:[Object(b.jsxs)(W.a,{style:{height:"3rem",padding:"1rem"},children:[Object(b.jsx)(V.a,{children:Object(b.jsx)(B.a,{onClick:function(e){return $(t,e)},children:Object(b.jsx)(oe.a,{})})}),Object(b.jsx)(Q,{value:c,id:t,updateItemTitle:function(e,t){return function(e,t){f.find((function(e){return e.id===t})).itemTitle=e,O(Object(D.a)(f)),G(!1)}(e,t)}}),Object(b.jsxs)(F.a,{children:[Object(b.jsx)(V.a,{style:{minWidth:"0"},children:Object(b.jsx)(M.a,{checked:n,icon:Object(b.jsx)(X.a,{}),checkedIcon:Object(b.jsx)(Y.a,{}),onClick:function(e){return function(e,t){t.preventDefault();var n=f.find((function(t){return t.id===e}));n.isFavorite=!n.isFavorite,O(Object(D.a)(f)),G(!1)}(t,e)},name:"checked"})}),Object(b.jsx)(V.a,{className:"drag-handle",style:{minWidth:"0",padding:"1rem"},children:Object(b.jsx)(K.a,{})})]})]}),Object(b.jsx)(J.a,{})]},t)})),Object(b.jsx)(J.a,{}),Object(b.jsx)("div",{className:Z.actionLine,children:Object(b.jsx)(p.a,{onClick:function(e){for(var t=f.reduce((function(e,t,n){return t.isDone&&e.push(n),e}),[]);t.length;)f.splice(t.pop(),1);O(Object(D.a)(f)),G(!1)},className:Z.deleteAllButton,children:"Remove finished"})}),f&&f.filter((function(e){return e.isDone})).map((function(e){var t=e.id,n=e.itemTitle;return Object(b.jsxs)(W.a,{style:{height:"3rem"},children:[Object(b.jsx)(V.a,{children:Object(b.jsx)(B.a,{onClick:function(e){return $(t,e)},children:Object(b.jsx)(ue.a,{})})}),Object(b.jsx)(q.a,{variant:"body1",style:{textDecoration:"line-through"},children:n}),Object(b.jsx)(F.a,{children:Object(b.jsx)(V.a,{children:Object(b.jsx)(B.a,{onClick:function(e){return function(e,t){f.splice(f.findIndex((function(t){return t.id===e})),1),O(Object(D.a)(f)),G(!1)}(t)},children:Object(b.jsx)(de.a,{})})})})]},t)}))]}),w&&Object(b.jsx)("pre",{children:"fetching data ..."})]})})]})},he=n(115),fe=n(212),pe=Object(s.g)((function(){return Object(c.useEffect)((function(){j.auth().signOut().then(console.log("signed out"))}),[]),Object(b.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)("h1",{children:"IKKE TILGANG, SJ\xd8!"}),Object(b.jsx)("p",{children:"Du er logget ut igjen"}),Object(b.jsx)("a",{href:"/",children:"Tilbake til innlogging"})]})})),Oe=Object(he.a)({palette:{primary:{main:"#494D5F"},secondary:{main:"#8458B3"}}}),me=function(){return Object(b.jsx)(fe.a,{theme:Oe,children:Object(b.jsx)(f,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(I,{exact:!0,path:"/",component:be}),Object(b.jsx)(s.b,{exact:!0,path:"/login",component:k}),Object(b.jsx)(s.b,{exact:!0,path:"/unauthorised",component:pe})]})})})};i.a.render(Object(b.jsx)(me,{}),document.getElementById("root"))}},[[175,1,2]]]);
//# sourceMappingURL=main.924bb88d.chunk.js.map