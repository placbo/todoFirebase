(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{132:function(e,t,n){},173:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),a=n(14),r=n.n(a),o=(n(132),n(83)),s=n(13),l=n(15),u=n(63);n(133);u.a.initializeApp({apiKey:"AIzaSyBlc-9cBQVLLXdLxYfVpgh8I3iFALoQ7E0",authDomain:"todo-2ac34.firebaseapp.com",databaseURL:"https://todo-2ac34.firebaseio.com",projectId:"todo-2ac34",storageBucket:"todo-2ac34.appspot.com",messagingSenderId:"144767486267",appId:"1:144767486267:web:53c6a77d36c83e42db4f1e"});var d=new u.a.auth.GoogleAuthProvider,j=u.a,b=n(4),f=i.a.createContext(),h=function(e){var t=e.children,n=Object(c.useState)(null),i=Object(l.a)(n,2),a=i[0],r=i[1],o=Object(c.useState)(!0),s=Object(l.a)(o,2),u=s[0],d=s[1];return Object(c.useEffect)((function(){j.auth().onAuthStateChanged((function(e){r(e),d(!1)}))}),[]),u?Object(b.jsx)(b.Fragment,{children:"Loading..."}):Object(b.jsx)(f.Provider,{value:{currentUser:a},children:t})},O=n(214),p=n(37),m=n.n(p),x=n(213),g=n(212),v=m()((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),y=Object(s.g)((function(){var e=v();return Object(c.useContext)(f).currentUser?Object(b.jsx)(s.a,{to:"/"}):Object(b.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(b.jsx)(x.a,{}),Object(b.jsx)("div",{className:e.paper,children:Object(b.jsx)(O.a,{onClick:function(){u.a.auth().signInWithPopup(d)},fullWidth:!0,variant:"contained",className:e.submit,color:"primary",children:"Sign In with Google"})})]})})),k=n(77),w=n(3),C=["component"],S=function(e){var t=e.component,n=Object(w.a)(e,C),i=Object(c.useContext)(f).currentUser;return Object(b.jsx)(s.b,Object(k.a)(Object(k.a)({},n),{},{render:function(e){return i?Object(b.jsx)(t,Object(k.a)({},e)):Object(b.jsx)(s.a,{to:"/login"})}}))},D=n(22),I=n(86),L=n.n(I),N=n(108),T=(n(175),function(){var e=Object(N.a)(L.a.mark((function e(t){var n;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return n=[],e.next=5,j.firestore().collection(t).get().then((function(e){e.forEach((function(e){console.log(e.data()),n.push(e.id)}))})).catch((function(e){console.log("Failed to load todo-list",e)})).finally((function(){console.log("list!",n)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=n(224),A=n(180),E=n(221),W=n(87),B=n(109),P=n.n(B),R=n(223),U=n(112),V=n.n(U),q=n(222),z=n(215),G=n(230),H=n(227),J=function(e){var t=e.value,n=e.id,i=e.updateItemTitle,a=Object(c.useState)(t),r=Object(l.a)(a,2),o=r[0],s=r[1],u=Object(c.useState)(!1),d=Object(l.a)(u,2),j=d[0],f=d[1],h=Object(c.useState)(!1),O=Object(l.a)(h,2),p=O[0],x=O[1],g=Object(c.useState)(""),v=Object(l.a)(g,2),y=v[0],k=v[1],w=m()({textView:{width:"50%",textOverflow:"ellipsis",cursor:"pointer",overflow:"hidden",whiteSpace:"nowrap",display:j?"none":""},inputView:{width:"50%",display:j?"":"none"}})(),C=Object(c.useRef)(null),S=function(){o.length>0?(f(!1),i(o,n),x(!1),k("")):(x(!0),k("Denne kan ikke v\xe6re tom"))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(z.a,{variant:"body1",className:w.textView,onClick:function(){setTimeout((function(){C.current.focus()}),100),f(!0)},children:o}),Object(b.jsx)(H.a,{className:w.inputView,variant:"standard",defaultValue:o,inputRef:C,required:!0,error:p,helperText:y,onKeyDown:function(e){"Enter"===e.key&&S()},onBlur:S,onChange:function(e){s(e.target.value)}})]})},K=n(228),Q=n(225),M=n(226),X=n(218),Y=n(219),Z=n(110),$=n.n(Z),_=n(220),ee=n(116),te=n(229),ne=m()((function(e){return{root:{backgroundColor:e.palette.primary},title:{cursor:"pointer"},toolbar:{justifyContent:"space-between"},profileImage:{borderRadius:"50%",verticalAlign:"middle",maxWidth:"3rem",maxHeight:"3rem",marginRight:"1rem"}}})),ce=function(e){var t=e.todoLists,n=e.onchange,i=e.currentTodoList,a=Object(s.f)(),r=ne(),o=Object(c.useContext)(f).currentUser,u=Object(c.useState)(null),d=Object(l.a)(u,2),h=d[0],p=d[1];return Object(b.jsx)(X.a,{position:"static",className:r.root,children:Object(b.jsxs)(Y.a,{className:r.toolbar,children:[Object(b.jsx)(z.a,{variant:"h6",className:r.title,onClick:function(){a.push("/")},children:"TODOAPP"}),!o&&Object(b.jsx)(O.a,{color:"inherit",children:"Login"}),!!o&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("div",{children:t.length>0&&Object(b.jsx)(te.a,{fullWidth:!0,style:{width:"10rem",backgroundColor:"#ffffff"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:i,variant:"outlined",onChange:n,children:t.map((function(e){return Object(b.jsx)(_.a,{value:e,children:e},e)}))})}),Object(b.jsx)(E.a,{color:"inherit","aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){p(e.currentTarget)},children:Object(b.jsx)($.a,{})}),Object(b.jsxs)(ee.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:!!h,onClose:function(){p(null)},children:[Object(b.jsx)("div",{style:{padding:"8px"},children:o.displayName?Object(b.jsxs)(z.a,{variant:"h6",children:[Object(b.jsx)("img",{src:o.photoURL,alt:"Avatar",className:r.profileImage}),o.displayName," "]}):Object(b.jsxs)(z.a,{variant:"h6",children:["Signed in as: ",o.email," "]})}),Object(b.jsx)(q.a,{}),Object(b.jsx)(_.a,{onClick:function(){j.auth().signOut().then((function(){a.push("/")}))},children:"Log out"})]})]})]})})},ie=n(111),ae=n.n(ie),re=n(113),oe=n.n(re),se=n(114),le=n.n(se),ue=m()((function(e){return{root:{margin:e.spacing(1),listStyleType:"none",display:"flex",justifyContent:"center",backgroundColor:"pink"},card:{width:"800px",minWidth:"300px",overflow:"hidden"},actionLine:{padding:"5px",display:"flex",justifyContent:"space-between"},input:{marginLeft:e.spacing(1),marginBottom:e.spacing(1),padding:e.spacing(1),flex:1,width:"80%"},inputfield:{}}})),de=function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)(""),r=Object(l.a)(a,2),o=r[0],s=r[1],u=Object(c.useState)([]),d=Object(l.a)(u,2),h=d[0],p=d[1],m=Object(c.useState)([]),x=Object(l.a)(m,2),g=x[0],v=x[1],y=Object(c.useState)(!1),k=Object(l.a)(y,2),w=k[0],C=k[1],S=Object(c.useContext)(f).currentUser,I=Object(c.useState)(!0),L=Object(l.a)(I,2),N=L[0],B=L[1],U=ue();Object(c.useEffect)((function(){C(!0),T(S.email).then((function(e){e&&e.length>0&&(v(e),i(e[0])),C(!1)}))}),[S.email]),Object(c.useEffect)((function(){var e,t;C(!0),n&&(e=S.email,t=n,console.log(e),console.log(t),j.firestore().collection(e).doc(t).get().then((function(e){return e.data()}))).then((function(e){console.log("Fetched: ",e),e.tasks&&p(e.tasks)})).catch((function(e){console.log("Failed to load todo-list",e)})).finally((function(){C(!1)}))}),[S.email,n]),Object(c.useEffect)((function(){var e,t,c;N||(console.log(h),(e=S.email,t=n,c=h,j.firestore().collection(e).doc(t).set({tasks:c}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error updating/creating document: ",e)}))).then((function(){B(!0)})))}),[h,N,S.email,n]);var X=function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isDone=!n.isDone,p(Object(D.a)(h)),B(!1)};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ce,{todoLists:g,onchange:function(e){i(e.target.value)},currentTodoList:n}),Object(b.jsx)("div",{className:U.root,children:Object(b.jsxs)("div",{className:U.card,children:[Object(b.jsx)("form",{style:{textAlign:"center"},onSubmit:function(e){e.preventDefault(),console.log(h);var t={itemTitle:o,id:Object(G.a)(),isFavorite:!1,isDone:!1};p([].concat(Object(D.a)(h),[t])),s(""),console.log(h),B(!1)},children:Object(b.jsx)(H.a,{className:U.input,variant:"outlined",fullWidth:!0,required:!0,placeholder:"Legg til en oppgave",value:o,onChange:function(e){return s(e.currentTarget.value)}})}),Object(b.jsxs)(W.Container,{onDrop:function(e){var t=e.removedIndex,n=e.addedIndex,c=h.filter((function(e){return!e.isDone})),i=h.findIndex((function(e){return e.id===c[t].id})),a=h.findIndex((function(e){return e.id===c[n].id}));p((function(e){return P()(e,i,a)})),B(!1)},getChildPayload:function(e){return h[e]},dragHandleSelector:".drag-handle",lockAxis:"y",dropPlaceholder:{animationDuration:150,showOnTop:!0,className:"cards-drop-preview"},children:[h&&h.filter((function(e){return!e.isDone})).map((function(e){var t=e.id,n=e.isFavorite,c=e.itemTitle;return Object(b.jsxs)(W.Draggable,{children:[Object(b.jsxs)(A.a,{style:{height:"3rem",padding:"1rem"},children:[Object(b.jsx)(R.a,{children:Object(b.jsx)(E.a,{onClick:function(e){return X(t,e)},children:Object(b.jsx)(ae.a,{})})}),Object(b.jsx)(J,{value:c,id:t,updateItemTitle:function(e,t){return function(e,t){h.find((function(e){return e.id===t})).itemTitle=e,p(Object(D.a)(h)),B(!1)}(e,t)}}),Object(b.jsxs)(F.a,{children:[Object(b.jsx)(R.a,{style:{minWidth:"0"},children:Object(b.jsx)(K.a,{checked:n,icon:Object(b.jsx)(Q.a,{}),checkedIcon:Object(b.jsx)(M.a,{}),onClick:function(e){return function(e,t){t.preventDefault();var n=h.find((function(t){return t.id===e}));n.isFavorite=!n.isFavorite,p(Object(D.a)(h)),B(!1)}(t,e)},name:"checked"})}),Object(b.jsx)(R.a,{className:"drag-handle",style:{minWidth:"0",padding:"1rem"},children:Object(b.jsx)(V.a,{})})]})]}),Object(b.jsx)(q.a,{})]},t)})),Object(b.jsx)(q.a,{}),h&&h.filter((function(e){return e.isDone})).map((function(e){var t=e.id,n=e.itemTitle;return Object(b.jsxs)(A.a,{style:{height:"3rem"},children:[Object(b.jsx)(R.a,{children:Object(b.jsx)(E.a,{onClick:function(e){return X(t,e)},children:Object(b.jsx)(oe.a,{})})}),Object(b.jsx)(z.a,{variant:"body1",style:{textDecoration:"line-through"},children:n}),Object(b.jsx)(F.a,{children:Object(b.jsx)(R.a,{children:Object(b.jsx)(E.a,{onClick:function(e){return function(e,t){h.splice(h.findIndex((function(t){return t.id===e})),1),p(Object(D.a)(h)),B(!1)}(t)},children:Object(b.jsx)(le.a,{})})})})]},t)})),Object(b.jsx)("div",{className:U.actionLine,children:Object(b.jsx)(O.a,{onClick:function(e){for(var t=h.reduce((function(e,t,n){return t.isDone&&e.push(n),e}),[]);t.length;)h.splice(t.pop(),1);p(Object(D.a)(h)),B(!1)},className:U.deleteAllButton,children:"Remove finished"})})]}),w&&Object(b.jsx)("pre",{children:"fetching data ..."})]})})]})},je=n(115),be=n(211),fe=Object(je.a)({palette:{primary:{main:"#494D5F"},secondary:{main:"#8458B3"}}}),he=function(){return Object(b.jsx)(be.a,{theme:fe,children:Object(b.jsx)(h,{children:Object(b.jsxs)(o.a,{children:[Object(b.jsx)(S,{exact:!0,path:"/",component:de}),Object(b.jsx)(s.b,{exact:!0,path:"/login",component:y})]})})})};r.a.render(Object(b.jsx)(he,{}),document.getElementById("root"))}},[[173,1,2]]]);
//# sourceMappingURL=main.b2a9e58b.chunk.js.map