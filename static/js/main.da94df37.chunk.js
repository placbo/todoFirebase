(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{33:function(e,t,n){e.exports=n(55)},38:function(e,t,n){},39:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(28),o=n.n(r),l=(n(38),n(39),n(20)),i=n(2),u=n(21),s=n.n(u),m=n(29),d=n(22),p=n.n(d);p.a.initializeApp({apiKey:"AIzaSyBlc-9cBQVLLXdLxYfVpgh8I3iFALoQ7E0",authDomain:"todo-2ac34.firebaseapp.com",databaseURL:"https://todo-2ac34.firebaseio.com",projectId:"todo-2ac34",storageBucket:"todo-2ac34.appspot.com",messagingSenderId:"144767486267",appId:"1:144767486267:web:53c6a77d36c83e42db4f1e"});var f=p.a,b=n(13),E=c.a.createContext(),h=function(e){var t=e.children,n=Object(a.useState)(null),r=Object(b.a)(n,2),o=r[0],l=r[1],i=Object(a.useState)(!0),u=Object(b.a)(i,2),s=u[0],m=u[1];return Object(a.useEffect)((function(){f.auth().onAuthStateChanged((function(e){l(e),m(!1)}))}),[]),s?c.a.createElement(c.a.Fragment,null,"Loading..."):c.a.createElement(E.Provider,{value:{currentUser:o}},t)},g=Object(i.f)((function(e){var t=e.history,n=Object(a.useCallback)(function(){var e=Object(m.a)(s.a.mark((function e(n){var a,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a=n.target.elements,c=a.email,r=a.password,e.prev=2,e.next=5,f.auth().signInWithEmailAndPassword(c.value,r.value);case 5:t.push("/"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),alert(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]);return Object(a.useContext)(E).currentUser?c.a.createElement(i.a,{to:"/"}):c.a.createElement("div",null,c.a.createElement("h1",null,"Log in"),c.a.createElement("form",{onSubmit:n},c.a.createElement("label",null,"Email",c.a.createElement("input",{name:"email",type:"email",placeholder:"Email"})),c.a.createElement("label",null,"Password",c.a.createElement("input",{name:"password",type:"password",placeholder:"Password"})),c.a.createElement("button",{type:"submit"},"Log in")))})),v=n(32),O=function(e){var t=e.component,n=Object(v.a)(e,["component"]),r=Object(a.useContext)(E).currentUser;return c.a.createElement(i.b,Object.assign({},n,{render:function(e){return r?c.a.createElement(t,e):c.a.createElement(i.a,{to:"/login"})}}))},j=n(31);var w=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),l=Object(b.a)(o,2),i=l[0],u=l[1],s=Object(a.useState)(!1),m=Object(b.a)(s,2),d=m[0],p=m[1],h=Object(a.useContext)(E).currentUser;return Object(a.useEffect)((function(){p(!0),f.firestore().collection("todoLists").doc(h.email).get().then((function(e){u(e.data().tasks)})).catch((function(e){console.log("fail to load todoList",e)})).finally((function(){p(!1)}))}),[h.email]),c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"TODO ",h&&"for ".concat(h.email)),c.a.createElement("pre",null,i.size),c.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={itemTitle:n},a=[].concat(Object(j.a)(i),[t]);u(a),f.firestore().collection("todoLists").doc(h.email).set({tasks:a}).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error updating/creating document: ",e)}))}},c.a.createElement("div",null,c.a.createElement("label",null)),c.a.createElement("input",{type:"text",value:n,onChange:function(e){return r(e.currentTarget.value)}}),c.a.createElement("button",null,"Add")),d&&c.a.createElement("h1",null,"fetching data ..."),i&&i.map((function(e,t){return c.a.createElement("li",{key:t},e.itemTitle)})),c.a.createElement("button",{onClick:function(){return f.auth().signOut()}},"Sign out"))},y=function(){return c.a.createElement(h,null,c.a.createElement(l.a,null,c.a.createElement("div",null,c.a.createElement(O,{exact:!0,path:"/",component:w}),c.a.createElement(i.b,{exact:!0,path:"/login",component:g}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.da94df37.chunk.js.map